window.timberSlider = window.timberSlider || {};

timberSlider.cacheSelectors = function () {
  timberSlider.cache = {
    $w: $(window),
    $mobileBreakpoint: 640,
    // Product Page
    $slider: $('.flexslider'),

    // Compression Page
    $diamondSlider: $('.diamond-slider'),
    $goldilocksSlider: $('.goldilocks-slider'),
    $familiarSlider: $('.familiar-slider')
  }
};

timberSlider.init = function () {
  timberSlider.cacheSelectors();
  timberSlider.productSliders();

  timberSlider.cache.$w.on('resize', function() {
    var size = timberSlider.cache.$w.width();

    // activate sliders only if on mobile
    if(size < timberSlider.cache.$mobileBreakpoint) {
      timberSlider.compressionSliders();
    }
  }).resize(); //trigger resize on load
};

timberSlider.productSliders = function () {
  var $slider = timberSlider.cache.$slider,
    sliderArgs = {
      selector: '.slides > div',
      animation: '{{ settings.slider_home_transition }}',
      animationLoop: false,
      animationSpeed: 800,
      pauseOnHover: true,
      keyboard: false,
      // slideshow: {{ settings.slider_home_auto }},
      slideshow: false,
      slideshowSpeed: {{ settings.slider_home_rate }},
      // controlNav: {{ settings.slider_home_show_dots }},
      controlNav: true,
      manualControls: '.tabs li',
      directionNav: false,
      smoothHeight: false
    };

  if ($slider.length) {
    if ($slider.find('li').length === 1) {
      sliderArgs.slideshow = false;
      sliderArgs.slideshowSpeed = 0;
      sliderArgs.controlNav = false;
      sliderArgs.directionNav = false;
      sliderArgs.touch = true;
    }
    $slider.flexslider(sliderArgs);
  }
};

timberSlider.compressionSliders = function () {
  var $diamondSlider = timberSlider.cache.$diamondSlider,
    sliderArgs = {
      selector: '.slides > li',
      animation: '{{ settings.slider_home_transition }}',
      animationLoop: true,
      animationSpeed: 800,
      pauseOnHover: true,
      keyboard: false,
      // slideshow: {{ settings.slider_home_auto }},
      slideshow: false,
      slideshowSpeed: {{ settings.slider_home_rate }},
      // controlNav: {{ settings.slider_home_show_dots }},
      controlNav: false,
      manualControls: '.tabs li',
      directionNav: false,
      smoothHeight: false
    };

  $('.prev, .next').on('click', function() {
    var href = $(this).attr('href');
    $diamondSlider.flexslider(href);
    return false;
  });

  if ($diamondSlider.length) {
    if ($diamondSlider.find('li').length === 1) {
      sliderArgs.slideshow = false;
      sliderArgs.slideshowSpeed = 0;
      sliderArgs.controlNav = false;
      sliderArgs.directionNav = false;
      sliderArgs.touch = true;
    }
    $diamondSlider.flexslider(sliderArgs);
  }


  var $goldilocksSlider = timberSlider.cache.$goldilocksSlider,
    sliderArgs = {
      selector: '.slides > li',
      animation: '{{ settings.slider_home_transition }}',
      animationLoop: true,
      animationSpeed: 800,
      pauseOnHover: true,
      keyboard: false,
      // slideshow: {{ settings.slider_home_auto }},
      slideshow: false,
      slideshowSpeed: {{ settings.slider_home_rate }},
      // controlNav: {{ settings.slider_home_show_dots }},
      controlNav: false,
      manualControls: '.tabs li',
      directionNav: false,
      smoothHeight: false,
      startAt: 2
    };

  $('.prev, .next').on('click', function() {
    var href = $(this).attr('href');
    $goldilocksSlider.flexslider(href);
    return false;
  });

  if ($goldilocksSlider.length) {
    if ($goldilocksSlider.find('li').length === 1) {
      sliderArgs.slideshow = false;
      sliderArgs.slideshowSpeed = 0;
      sliderArgs.controlNav = false;
      sliderArgs.directionNav = false;
      sliderArgs.touch = true;
    }
    $goldilocksSlider.flexslider(sliderArgs);
  }


  var $familiarSlider = timberSlider.cache.$familiarSlider,
    sliderArgs = {
      selector: '.slides > li',
      animation: '{{ settings.slider_home_transition }}',
      animationLoop: true,
      animationSpeed: 800,
      pauseOnHover: true,
      keyboard: false,
      // slideshow: {{ settings.slider_home_auto }},
      slideshow: false,
      slideshowSpeed: {{ settings.slider_home_rate }},
      // controlNav: {{ settings.slider_home_show_dots }},
      controlNav: false,
      manualControls: '.tabs li',
      directionNav: false,
      smoothHeight: false
    };

  $('.prev, .next').on('click', function() {
    var href = $(this).attr('href');
    $familiarSlider.flexslider(href);
    return false;
  });

  if ($familiarSlider.length) {
    if ($familiarSlider.find('li').length === 1) {
      sliderArgs.slideshow = false;
      sliderArgs.slideshowSpeed = 0;
      sliderArgs.controlNav = false;
      sliderArgs.directionNav = false;
      sliderArgs.touch = true;
    }
    $familiarSlider.flexslider(sliderArgs);
  }
};

// Initialize slider on docready
$(window).on('load', function() {
  timberSlider.init();
});
