window.timberSlider = window.timberSlider || {};

timberSlider.cacheSelectors = function () {
  timberSlider.cache = {
    // Product Page
    $slider: $('.flexslider'),
    $diamondSlider: $('.diamond-slider')
  }
};

timberSlider.init = function () {
  timberSlider.cacheSelectors();
  timberSlider.sliders();
};

timberSlider.sliders = function () {
  // Product Page
  var $slider = timberSlider.cache.$slider,
    sliderArgs = {
      selector: '.slides > div',
      animation: '{{ settings.slider_home_transition }}',
      animationLoop: false,
      animationSpeed: 800,
      pauseOnHover: true,
      keyboard: false,
      // slideshow: {{ settings.slider_home_auto }},
      slideshow: false,
      slideshowSpeed: {{ settings.slider_home_rate }},
      // controlNav: {{ settings.slider_home_show_dots }},
      controlNav: true,
      manualControls: '.tabs li',
      directionNav: false,
      smoothHeight: false
    };

  if ($slider.length) {
    if ($slider.find('li').length === 1) {
      sliderArgs.slideshow = false;
      sliderArgs.slideshowSpeed = 0;
      sliderArgs.controlNav = false;
      sliderArgs.directionNav = false;
      sliderArgs.touch = true;
    }
    $slider.flexslider(sliderArgs);
  }

  // Compression Page
  var $diamondSlider = timberSlider.cache.$diamondSlider,
    sliderArgs = {
      selector: '.slides > li',
      animation: '{{ settings.slider_home_transition }}',
      animationLoop: true,
      animationSpeed: 800,
      pauseOnHover: true,
      keyboard: false,
      // slideshow: {{ settings.slider_home_auto }},
      slideshow: false,
      slideshowSpeed: {{ settings.slider_home_rate }},
      // controlNav: {{ settings.slider_home_show_dots }},
      controlNav: false,
      manualControls: '.tabs li',
      directionNav: false,
      smoothHeight: false
    };

  $('.prev, .next').on('click', function() {
    var href = $(this).attr('href');
    $diamondSlider.flexslider(href);
    return false;
  });

  if ($diamondSlider.length) {
    if ($diamondSlider.find('li').length === 1) {
      sliderArgs.slideshow = false;
      sliderArgs.slideshowSpeed = 0;
      sliderArgs.controlNav = false;
      sliderArgs.directionNav = false;
      sliderArgs.touch = true;
    }
    $diamondSlider.flexslider(sliderArgs);
  }
};

// Initialize slider on docready
$(window).on('load', function() {
  timberSlider.init();
});
